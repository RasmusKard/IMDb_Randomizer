<!DOCTYPE html>
<html>
<head>
  <script src="{{ url_for('static', filename='jquery/dist/jquery.min.js') }}"></script>
  <script src="{{ url_for('static', filename='@popperjs/core/dist/umd/popper.min.js') }}"></script>
  <script src="{{ url_for('static', filename='bootstrap/dist/js/bootstrap.min.js') }}"></script>
  <script src="{{ url_for('static', filename='jquery-ui-dist/jquery-ui.min.js') }}"></script>
  <script src="{{ url_for('static', filename='nouislider/dist/nouislider.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js-cookie/dist/js.cookie.min.js') }}"></script>
  <script src="{{ url_for('static', filename='script.js') }}"></script>
</head>
<script>
    function resetFilters() {
    // Reset the checkboxes
    $("input[type='checkbox']").prop('checked', false);

    // Reset the sliders
    $("#ratingRangeSliderContainer .slider").val([0, 10]);
    $("#ratingRangeValue").text("0 - 10");
    $("#minVotesSlider").val(0);
    $("#minVotesValue").text("0");
    $("#yearSlider").val([1900, new Date().getFullYear()]);
    $("#yearRangeValue").text("1900 - " + new Date().getFullYear());

    document.getElementById("genreMultiSelect").innerHTML = "";
    document.getElementById("contentTypeMultiSelect").innerHTML = "";

    // Reset rating slider
    const ratingSlider = document.getElementById("ratingRangeSliderContainer");
    const ratingRangeValue = document.getElementById("ratingRangeValue");
    ratingSlider.noUiSlider.reset();
    ratingRangeValue.innerHTML = "0 - 10"; // Reset the displayed value

    // Reset minVotes slider
    const minVotesSlider = document.getElementById("minVotesSlider");
    const minVotesValue = document.getElementById("minVotesValue");
    minVotesSlider.noUiSlider.reset();
    minVotesValue.innerHTML = "0"; // Reset the displayed value

    // Reset year slider
    const yearSlider = document.getElementById("yearSlider");
    const yearRangeValue = document.getElementById("yearRangeValue");
    yearSlider.noUiSlider.reset();
    yearRangeValue.innerHTML = "1900 - 2023"; // Reset the displayed value

  }
<style>
  @media (prefers-color-scheme: dark) {
  body {
    background-color: #222222;
    color: #ffffff;
  }
}
</style>

</script>
<body>
<div class="container">
  <div class="logo">
    <img src="/static/imdb_randomizer.png" alt="Logo">
  </div>
   <hr style="height:1px;border:none;color:#333;background-color:#333;">
<form action="/run_script" method="post">
  <div class="contentType-group form-group">
    <div class="dropdown-checkbox">
      <button class="dropdown-toggle" type="button" id="contentTypeDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Select Content Types
      </button>
<div class="dropdown-menu checkbox-menu" aria-labelledby="contentTypeDropdown">
  {% set contentTypes = [
    "Movie",
    "TVSeries",
    "TVMovie",
    "TVSpecial",
    "Video",
    "Short",
    "TVShort"
  ] %}

  {% for contentType in contentTypes %}
    <div class="dropdown-item">
      <input type="checkbox" id="contentType{{ loop.index }}" name="contentTypes" value="{{ contentType|lower }}">
      <label for="contentType{{ loop.index }}">{{ contentType }}</label>
    </div>
  {% endfor %}
</div>
    </div>
    <div class="multi-select-input" id="contentTypeMultiSelect"></div>
  </div>

<div class="genre-group form-group">
  <div class="dropdown-checkbox">
    <button class="dropdown-toggle" type="button" id="genreDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      Select Genres
    </button>
    <div class="dropdown-menu checkbox-menu" aria-labelledby="genreDropdown">
      {% set genres = [
        "Action",
        "Adventure",
        "Animation",
        "Comedy",
        "Crime",
        "Documentary",
        "Drama",
        "Fantasy",
        "Family",
        "Film-Noir",
        "Horror",
        "Musical",
        "Mystery",
        "Romance",
        "Sci-Fi",
        "Short",
        "Thriller",
        "War",
        "Western"
      ] %}

      {% for genre in genres %}
        <div class="dropdown-item">
          <input type="checkbox" id="genre{{ loop.index }}" name="genres" value="{{ genre }}">
          <label for="genre{{ loop.index }}">{{ genre }}</label>
        </div>
      {% endfor %}
    </div>
  </div>
  <div class="multi-select-input" id="genreMultiSelect"></div>
</div>

  <div class="slider-container">
    <div class="ratingRange-group form-group">
      <label for="ratingRangeSlider">Average Rating Range:</label>
      <div id="ratingRangeSliderContainer" class="slider"></div>
      <div class="slider-value-container">
        <div class="slider-value" id="ratingRangeValue"></div>
      </div>
      <input type="hidden" id="minRatingInput" name="min_rating">
      <input type="hidden" id="maxRatingInput" name="max_rating">
    </div>
  </div>

  <div class="slider-container">
    <div class="minVotes-group form-group">
      <label for="minVotesSlider">Minimum Amount of Votes:</label>
      <div id="minVotesSlider" class="slider"></div>
      <div class="slider-value-container">
        <div class="slider-value" id="minVotesValue"></div>
      </div>
      <input type="hidden" id="minVotesInput" name="min_votes">
    </div>
  </div>

  <div class="slider-container">
    <div class="yearRange-group form-group">
      <label for="yearSlider">Release Year Range:</label>
      <div id="yearSlider" class="slider"></div>
      <div class="slider-value-container">
        <div class="slider-value" id="yearRangeValue"></div>
      </div>
      <input type="hidden" id="minYearInput" name="min_year">
      <input type="hidden" id="maxYearInput" name="max_year">
    </div>
  </div>

  <div class="box2">
        <button type="submit" class="submit-btn">&#x1F37F; Randomize &#x1F37F;</button>
        <label for="info-checkbox1" class="info-button">
          <img src="/static/information.png" alt="Info" />
        </label>
        <input type="checkbox" id="info-checkbox1" class="info-checkbox" />
        <div class="info-popup">
          <p>If filters are left unchanged, all checkboxes will be treated as active (selected), and all sliders will be set to their widest range, resulting in the broadest selection of content in the results.</p>
        </div>
        {% if error_message %}
        <div class="error">
            <div class="message">
                <p>{{ error_message }}</p>
                <span class="close">X</span>
            </div>
        </div>
        {% endif %}
  </div>
 <hr style="height:1px;border:none;color:#333;background-color:#333;">
  <div class="box1">
      <button type="button" class="btn btn-primary reset-btn" onclick="resetFilters()">Reset Filters</button>
  </div>
      <div class="dropdown-textbox">
    <button type="button" class="btn btn-secondary dropdown-toggle" id="watchedContentButton">
      Click here to filter content by IMDb ID
    </button>
    <div id="watchedContentFormContainer" class="dropdown-menu">
      <div class="dropdown-item">
        <label for="watchedContentInput"><p>Enter IMDb IDs (one ID per line):<br>
          1. Go to https://www.imdb.com/list/ratings<br>
          2. Click on the three bubbles and choose "Export"<br>
          3. Open the file and copy-paste the IDs from the "Const" column here
            </p>
        </label>
        <textarea id="watchedContentInput" name="watchedContent" style="width: 200px;"></textarea>
      </div>
    </div>
</div>
</form>

  </div>

  <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap/dist/css/bootstrap.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='nouislider/dist/nouislider.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='jquery-ui-dist/jquery-ui.min.css') }}">
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">

</body>
</html>